# Quick Start Guide - Refactored Services

## New Service Commands

### Historical Validator
Analyze a single trading pair for arbitrage opportunities.

```bash
# Basic usage (BTC/USDT with default settings)
python -m services.historical_validator

# Analyze specific pair
python -m services.historical_validator ETH/USDT

# Custom timeframe and limit
python -m services.historical_validator BTC/USDT --timeframe 5m --limit 2000

# Skip plot generation
python -m services.historical_validator SOL/USDT --no-plot

# Custom plot save path
python -m services.historical_validator BTC/USDT --save-plot my_analysis.png
```

### Market Scanner
Scan all common pairs across exchanges.

```bash
# Full scan with whitelist generation
python -m services.market_scanner

# Skip whitelist generation
python -m services.market_scanner --no-whitelist

# Custom CSV output path
python -m services.market_scanner --csv my_results.csv

# Custom config file
python -m services.market_scanner --config config/config.yaml
```

## Programmatic Usage

### Historical Validator

```python
from services.historical_validator import HistoricalValidator

# Initialize
validator = HistoricalValidator(config_path='config/config.yaml')

# Analyze a pair
results = validator.analyze(symbol='BTC/USDT', timeframe='15m', limit=1000)

# Check results
if results['is_profitable']:
    print(f"Max Spread: {results['max_spread_pct']*100:.4f}%")
    print(f"Stationary: {results['is_stationary']}")
    
    # Generate plot
    validator.plot_analysis(symbol='BTC/USDT', save_path='btc.png')
```

### Market Scanner

```python
from services.market_scanner import MarketScanner

# Initialize
scanner = MarketScanner(config_path='config/config.yaml')

# Get common symbols
symbols = scanner.get_common_symbols()

# Analyze specific pair
metrics = scanner.analyze_pair('ETH/USDT')

# Full scan
results = scanner.scan(save_to_whitelist=True, csv_path='results.csv')
```

## Migration from Legacy

| Old | New |
|-----|-----|
| `python arbitrage_analysis.py` | `python -m services.historical_validator BTC/USDT` |
| `python market_scanner.py` | `python -m services.market_scanner` |

## Output Files

- **analysis_plot.png** - Generated by historical_validator
- **arbitrage_candidates.csv** - Generated by market_scanner
- **config/whitelist.json** - Generated by market_scanner (if enabled)

## Configuration

Edit `config/config.yaml` to adjust:
- Z-Score thresholds
- Minimum spread requirements
- Volume/depth filters
- Exchange settings
- Exclude patterns

## Legacy Scripts

Old scripts moved to `legacy/` directory. See `legacy/README.md` for details.

**Do not use legacy scripts in production.**
